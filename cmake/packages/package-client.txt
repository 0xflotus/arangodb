# the client package is a complete cmake sub package.
project(PACKAGE-CLIENT)
cmake_minimum_required(VERSION 2.8)

# variables from the main build have to be explicitely forwarded:
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "@PROJECT_BINARY_DIR@/bin/")
set(BIN_ARANGOBENCH @BIN_ARANGOBENCH@)
set(BIN_ARANGODUMP @BIN_ARANGODUMP@)
set(BIN_ARANGOIMP @BIN_ARANGOIMP@)
set(BIN_ARANGORESTORE @BIN_ARANGORESTORE@)
set(BIN_ARANGOSH @BIN_ARANGOSH@)
set(BIN_ARANGOVPACK @BIN_ARANGOVPACK@)
set(CMAKE_INSTALL_FULL_BINDIR @CMAKE_INSTALL_FULL_BINDIR@)

set(CMAKE_INSTALL_SYSCONFDIR_ARANGO @CMAKE_INSTALL_SYSCONFDIR_ARANGO@)
set(CMAKE_INSTALL_FULL_SYSCONFDIR_ARANGO @CMAKE_INSTALL_FULL_SYSCONFDIR_ARANGO@)

set(ORIGINAL_SOURCE_DIR @PROJECT_SOURCE_DIR@)
set(PROJECT_SOURCE_DIR @PROJECT_SOURCE_DIR@)

include(${ORIGINAL_SOURCE_DIR}/cmake/ArangoDBinstallCfg.cmake)

# Start installing the client components:
install(
  DIRECTORY ${ORIGINAL_SOURCE_DIR}/js/common ${ORIGINAL_SOURCE_DIR}/js/client
  DESTINATION share/arangodb3/js
  FILES_MATCHING PATTERN "*.js"
  REGEX "^.*/common/test-data$" EXCLUDE
  REGEX "^.*/common/tests$" EXCLUDE
  REGEX "^.*/client/tests$" EXCLUDE)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGOBENCH}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})
install_config(arangobench)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGODUMP}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})
install_config(arangodump)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGOIMP}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})
install_config(arangoimp)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGORESTORE}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})
install_config(arangorestore)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGOSH}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})
install_config(arangosh)

install(
  FILES ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/${BIN_ARANGOVPACK}
  DESTINATION ${CMAKE_INSTALL_FULL_BINDIR})

install_command_alias(${BIN_ARANGOSH}
  ${CMAKE_INSTALL_FULL_BINDIR}
  foxx-manager)
install_config(foxx-manager)


# client packaging starts here:

set(CPACK_PACKAGE_NAME "arangodb3-client")
set(CPACK_PACKAGE_CONTACT "info@arangodb.com")
set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "ArangoDB Client Package")

include(CPack)
